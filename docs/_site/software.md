System works by implementing simple state machine as following:

<img src="../states.png">
